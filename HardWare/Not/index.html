<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مدار گیت NOT</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
    <style>
        @font-face {
            font-family: 'Vazir';
            src: url('https://cdn.fontcdn.ir/Font/Persian/Vazir/Vazir.woff') format('woff');
        }
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
            font-family: 'Vazir', sans-serif;
            flex-direction: column;
        }
        canvas {
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            background: #ffffff;
            max-width: 320px;
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<h1>مدار گیت NOT</h1>
<div id="circuit"></div>

<script>
let sketch = function(p) {
    let switchOn = false;
    let centerY;

    p.setup = function() {
        p.createCanvas(320, 450);
        p.textAlign(p.CENTER, p.CENTER);
        p.textSize(16);
        p.textFont('Vazir');
        centerY = p.height / 2;
    };

    p.draw = function() {
        p.background(255);
        p.fill(255);
        p.stroke(0);
        p.strokeWeight(1);
        p.rect(20, 30, 280, 390, 20);
        p.textSize(22);
        p.fill(0);
        p.text("مدار تعاملی گیت NOT", 160, 60);
        
        drawCircuit();
    };

    function drawCircuit() {
        let centerX = p.width / 2;
        let circuitWidth = 240;
        let circuitHeight = 120;

        let topWireY = centerY - circuitHeight / 2;
        let bottomWireY = centerY + circuitHeight / 2;
        let leftWireX = centerX - circuitWidth / 2;
        let rightWireX = centerX + circuitWidth / 2;
        
        // Define component positions
        let resistorX = leftWireX + 60;
        let parallelBranchX_start = centerX - 40;
        let parallelBranchX_end = centerX + 40;
        
        p.stroke(0);
        p.strokeWeight(3);
        p.noFill();

        // Main circuit wires
        p.line(leftWireX, topWireY, resistorX - 15, topWireY); // Wire before resistor
        p.line(resistorX + 15, topWireY, rightWireX, topWireY); // Wire after resistor
        p.line(rightWireX, topWireY, rightWireX, bottomWireY); // Right vertical wire
        p.line(rightWireX, bottomWireY, leftWireX, bottomWireY); // Bottom horizontal wire
        p.line(leftWireX, bottomWireY, leftWireX, topWireY); // Left vertical wire

        // --- Components ---
        drawBattery(leftWireX, centerY);
        drawResistor(resistorX, topWireY);
        
        // --- Parallel Branches ---
        // Top vertical wire for parallel branches
        p.line(parallelBranchX_start, topWireY, parallelBranchX_start, centerY);
        p.line(parallelBranchX_end, topWireY, parallelBranchX_end, centerY);

        // Bottom vertical wire for parallel branches
        p.line(parallelBranchX_start, centerY, parallelBranchX_start, bottomWireY);
        p.line(parallelBranchX_end, centerY, parallelBranchX_end, bottomWireY);

        // Draw the vertical switch on the first parallel branch
        drawVerticalSwitch(parallelBranchX_start, centerY, switchOn);

        // Draw the bulb on the second parallel branch
        drawBulb(parallelBranchX_end, centerY, !switchOn);

    }

    function drawBattery(x, y_center) {
        p.push();
        p.translate(x, y_center);
        p.stroke(0);
        p.strokeWeight(4);
        p.line(-20, -5, 20, -5);
        p.line(-10, 5, 10, 5);
        p.noStroke();
        p.fill(0);
        p.textSize(10);
        p.text('باتری', 35, 10);
        p.pop();
    }

    function drawResistor(x, y) {
        p.push();
        p.translate(x, y);
        p.stroke(0);
        p.strokeWeight(3);
        p.noFill();
        p.rect(-15, -10, 30, 20);
        p.fill(0);
        p.textAlign(p.CENTER);
        p.textSize(10);
        p.noStroke();
        p.text('مقاومت', 0, 20);
        p.text('R', 0, -15);
        p.pop();
    }

    function drawBulb(x, y, isOn) {
        p.push();
        p.translate(x, y);
        p.stroke(0);
        p.strokeWeight(2);
        if (isOn) {
            p.fill(255, 255, 0); // Yellow for ON
        } else {
            p.fill(255); // White for OFF
        }
        p.ellipse(0, 0, 30, 30);
        p.stroke(0);
        p.strokeWeight(1);
        if (isOn) {
            p.stroke(255, 150, 0);
            p.strokeWeight(2);
        }
        p.line(-6, -6, 6, 6);
        p.line(-6, 6, 6, -6);
        p.fill(0);
        p.textAlign(p.LEFT);
        p.textSize(12);
        p.noStroke();
        p.text('لامپ', 20, 15);
        p.pop();
    }
    
    function drawVerticalSwitch(x, y, isOn) {
        p.push();
        p.translate(x, y);
        p.stroke(0);
        p.strokeWeight(3);
        p.fill(0);
        p.ellipse(0, -15, 5, 5); // Top terminal
        p.ellipse(0, 15, 5, 5); // Bottom terminal
        if (isOn) {
            p.stroke(0, 150, 0); // Green for ON
            p.strokeWeight(4);
            p.line(0, -15, 0, 15);
        } else {
            p.stroke(255, 0, 0); // Red for OFF
            p.strokeWeight(3);
            p.line(0, -15, 12, 10);
        }
        p.fill(0);
        p.textAlign(p.CENTER);
        p.textSize(10);
        p.noStroke();
        p.text('سویچ', 20, 0);
        p.pop();
    }

    p.mousePressed = function() {
        let switchX = p.width / 2 - 40;
        let switchY = centerY;
        let dist = p.dist(p.mouseX, p.mouseY, switchX, switchY);
        
        if (dist < 20) {
            switchOn = !switchOn;
        }
    };
};

new p5(sketch, 'circuit');
</script>

</body>
</html>