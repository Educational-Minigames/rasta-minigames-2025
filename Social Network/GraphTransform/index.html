<!doctype html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Content Graph</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container" id="gameContainer">
        <header>
            <div>
                <h1 class="title">گراف کاربر و محتوا</h1>
                <div class="subtitle">هر گراف کاربر-کاربر قابل تبدیل به یک گراف کاربر-محتوا هست و بالعکس</div>
            </div>
            <div style="width:160px"></div>
        </header>

        <main class="panels">
            <section class="panel left-panel" aria-label="گراف کاربران">
                <div class="panel-title">گراف کاربران</div>
                <div class="canvas-wrap" id="leftWrap">
                    <svg id="leftSvg" viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet"></svg>
                </div>
            </section>

            <div class="divider" aria-hidden="true"></div>

            <section class="panel right-panel" aria-label="گراف محتوا">
                <div class="panel-title">گراف محتوا</div>
                <div class="canvas-wrap" id="rightWrap">
                    <svg id="rightSvg" viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet"></svg>
                </div>
            </section>
        </main>
    </div>

    <!-- controls bar OUTSIDE container -->
    <div class="controls-bar" id="controlsBar">
        <button id="helpBtn" class="ctrl">راهنما</button>
        <div class="stage-info">
            <div id="stageTitle">مرحله 1 / 3</div>
            <div id="phaseTitle">فاز پیشنهاد</div>
        </div>
        <div class="controls">
            <button id="btnNext" title="مرحله بعد" class="ctrl"><img src="assets/png/right.png" alt="next"></button>
            <button id="btnPlay" title="ریست بازی" class="ctrl main"><img src="assets/png/play.png" alt="play">
                ریست</button>
            <button id="btnPrev" title="مرحله قبل" class="ctrl"><img src="assets/png/left.png" alt="prev"></button>
        </div>
    </div>

    <!-- help modal -->
    <div id="helpModal" class="modal" style="display:none">
        <div class="modal-content">
            <h2>راهنمای بازی</h2>
            <ol>
                <li>در هر راند یک محتوا (ایموجی) در گراف محتوا نمایش داده می‌شود و با خط‌چین به یک یا چند کاربر پیشنهاد
                    می‌شود.</li>
                <li>در فاز پیشنهاد، یال‌ها خط‌چین هستند و کنار آواتار کاربران پیشنهادی آیکون محتوا نمایش داده می‌شود
                    (فقط محتوای همان راند).</li>
                <li>با زدن «مرحله بعد» وارد فاز واکنش می‌شویم — واکنش‌ها به‌صورت رندم ثبت می‌شوند و بلافاصله نمایش داده
                    می‌شوند.</li>
                <li>پس از ثبت واکنش، یال مربوطه در گراف محتوا پیوسته می‌شود و مقدار عددی روی یال نمایش داده می‌شود.</li>
                <li>با زدن دوباره «مرحله بعد» به راند بعدی می‌رویم. بازی ۳ راند دارد و پس از پایان دیگر جلو نمی‌رود.
                </li>
            </ol>
            <button id="closeHelp" class="ctrl">بستن</button>
        </div>
    </div>

    <!-- reaction picker (kept but not required) -->
    <div id="picker" class="picker" style="display:none">
        <button data-val="1">😍</button>
        <button data-val="0.5">🙂</button>
        <button data-val="0">🙁</button>
        <button data-val="-0.5">🤢</button>
        <button data-val="-1">☠</button>
    </div>

    <script src="app.js"></script>
</body>

</html>